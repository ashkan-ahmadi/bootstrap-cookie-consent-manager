/*!
 * Cookie Consent Manager v2.1
 * https://github.com/ashkan-ahmadi/bootstrap-cookie-consent-manager
 * 
 * Licensed under MIT
 */
var A=a=>typeof a==='function';var b=a=>a==void 0;export default class cookieConsentManager{constructor(_,B){this.PREFIX='cookieConsent'+'_';this.CONSENT_TYPE_PREFIX=this.PREFIX+'consentType'+'_';this.SET_NAME=this.PREFIX+'isSet';this.SET_POSITIVE_VALUE='true';this.SET_NEGATIVE_VALUE='false';this.VERSION=2.1;this.VERSION_NAME=this.PREFIX+'version';this.defaultConsentTypes=[];this.userConsentTypes=_;this.defaultConfigs={cookieConsentAcceptEventName:'cookie_consent_accept',cookieConsentRejectEventName:'cookie_consent_reject',cookieConsentUpdateEventName:'cookie_consent_update',modalId:'cookie-consent-manager-modal',modalTitle:'Customize the cookies',centered:!0,scrollable:!0,animation:!0,staticBackground:!0,showCloseButtonOnModal:!1,useLocalStorage:!0,acceptAllButtonText:'Accept all',acceptAllButtonAccessibleText:'Accept all cookies',rejectAllButtonText:'Reject all',rejectAllButtonAccessibleText:'Reject all cookies',customizeButtonText:'Customize',customizeButtonAccessibleText:'Customize cookies',saveButtonText:'Save',saveButtonAccessibleText:'Save preferences',bannerTitle:'We respect your privacy',bannerText:'We use cookies on our site to enhance your user experience, provide personalized content, and analyze our traffic. You can find more information on our <a href="/cookie-policy">Cookie Policy</a>.',showRejectAllButtonOnBanner:!0,freezeScrollingOnBanner:!0};this.userConfigs=B;this.banner=this.modal=null}init(){if(!this.bootstrapExists()){console.error('BOOTSTRAP COOKIE CONSENT MANAGER: Bootstrap JS is not found. Make sure Bootstrap JS is loaded BEFORE loading this script. For more information, visit https://github.com/ashkan-ahmadi/bootstrap-cookie-consent-manager');return}this.setConsent_default();if(!this.isConsentSet()){this.showBanner();return}!this.verifyVersionFromLocalStorage()&&console.warn(`There is a version mismatch between the current version of the Cookie Consent Manager library and what's stored in the localStorage`);this.updateConsent_fromLocalStorage();this.fireCookieConsentUpdateEvent();this.fireCookieConsentIndividualEvents()}getPrefix(){return this.PREFIX}getConsentTypePrefix(){return this.CONSENT_TYPE_PREFIX}getConsentSetName(){return this.SET_NAME}getConsentSetValue(){return this.SET_POSITIVE_VALUE}getConsentSetPositiveValue(){return this.SET_POSITIVE_VALUE}getConsentSetNegativeValue(){return this.SET_NEGATIVE_VALUE}getVersion(){return this.VERSION}getVersionName(){return this.VERSION_NAME}getDefaultConsentTypes(){return this.defaultConsentTypes}getUserConsentTypes(){return this.userConsentTypes}getConsentTypes(){var c=this.getDefaultConsentTypes(),C=this.getUserConsentTypes();return[...c,...C]}getEnabledConsentTypes(){var _a=this.getConsentTypes();if(!_a)return;var _b=_a.filter(d=>d.enabled!==!1);return _b}getRequiredConsentTypes(){var D=this.getConsentTypes();if(!D)return;var _B=D.filter(_A=>_A.required===!0);return _B}isConsentSet(){var e=this.getConsentSetName(),E=this.getConsentSetValue();try{var _c=this.getConfigs();if(_c?.useCookieInsteadOfLocalStorage)console.log('You are opting to use cookies instead of local storage');else{var _d=localStorage.getItem(e);return _d===E}}catch(aA){console.error(aA)}}setConsent_acceptAll(){try{var enabledConsentTypes=this.getEnabledConsentTypes();if(!enabledConsentTypes||enabledConsentTypes?.length===0)return;for(const aB of enabledConsentTypes){if(b(aB.id)||!aB?.id){console.warn(`Consent type required an "id" property but either it was not provided, or it's empty. This type was skipped completely and nothing was set for this type.`);continue}var prefix=this.getConsentTypePrefix(),name=prefix+aB?.id,value=this.SET_POSITIVE_VALUE;localStorage.setItem(name,value);if(aB.onAccept&&A(aB.onAccept))aB.onAccept();else (aB.onAccept&&!A(aB.onAccept))&&console.warn(`Property onAccept on cookie consent type with id "${aB.id}" expected a function but received a ${typeof aB.onAccept}. Review and make sure you pass a function if you want a callback to run on accepting this cookie consent type.`)}this.setConsentSet();this.setVersion()}catch(aC){console.error('There was an error with setConsent_acceptAll()');console.error(aC)}}setConsent_rejectAll(){try{var enabledConsentTypes=this.getEnabledConsentTypes();if(!enabledConsentTypes||enabledConsentTypes?.length===0){console.warn(`requiredConsentTypes is null or empty. If this is intentional, you can ignore this warning.`);return}for(const aD of enabledConsentTypes){if(b(aD.id)||!aD?.id){console.warn(`Consent type required an "id" property but either it was not provided, or it's empty. This type was skipped completely and nothing was set for this type.`);continue}var prefix=this.getConsentTypePrefix(),name=prefix+aD?.id,value=aD?.required?this.SET_POSITIVE_VALUE:this.SET_NEGATIVE_VALUE;localStorage.setItem(name,value);if(aD.required!==!0)if(aD.onReject&&A(aD.onReject))aD.onReject();else (aD.onReject&&!A(aD.onReject))&&console.warn(`Property onReject on cookie consent type with id "${aD.id}" expected a function but received a ${typeof aD.onReject}. Review and make sure you pass a function if you want a callback to run on accepting this cookie consent type.`)}this.setConsentSet();this.setVersion()}catch(aE){console.error('There was an error with setConsent_acceptAll()');console.error(aE)}}setConsent_saveCustomized(){var aF=this.getConfigs(),{modalId:aG}=aF||{};try{var _C=document.querySelector(`#${aG}`);if(!_C){console.warn(`modal in setConsent_saveCustomized is empty.`);return}var _D=_C.querySelectorAll('input.form-check-input');if(!_D||_D.length===0){console.warn(`checkboxes in setConsent_saveCustomized is empty.`);return}for(const aH of _D){var _e=this.getConsentTypePrefix(),f=_e+aH?.id,g=aH?.checked?this.SET_POSITIVE_VALUE:this.SET_NEGATIVE_VALUE;localStorage.setItem(f,g)}this.setConsentSet();this.setVersion()}catch(aI){console.error('There was an error with setConsent_saveCustomized()');console.error(aI)}}setConsentSet(){localStorage.setItem(this.getConsentSetName(),this.getConsentSetPositiveValue())}getDefaultConfigs(){return this.defaultConfigs}getUserConfigs(){return this.userConfigs}getConfigs(){var aJ=this.getDefaultConfigs(),aK=this.getUserConfigs();return{...aJ,...aK}}createBannerHTML(){var aL=this.getConfigs(),{bannerTitle:aM,bannerText:aN,acceptAllButtonText:aO,acceptAllButtonAccessibleText:_E,rejectAllButtonText:F,rejectAllButtonAccessibleText:G,customizeButtonText:h,customizeButtonAccessibleText:i,showRejectAllButtonOnBanner:j}=aL||{},k=aO!==_E,l=F!==G,m=h!==i,n=document.createElement('div'),p=document.createElement('div');n.setAttribute('id','cookie-consent-manager');var o=document.createElement('div');o.classList.add('position-fixed','top-0','bottom-0','start-0','end-0','bg-dark','opacity-50','z-1');o.setAttribute('id','cookie-consent-manager-backdrop');p.classList.add('position-fixed','bottom-0','start-0','p-3','w-100','border-top','bg-body-tertiary','z-2');p.setAttribute('id','cookie-consent-manager-banner');p.innerHTML=`
      <div class="container">
        <div class="row g-3 g-md-4 g-xl-5">
          <div class="col-12 col-md-8 col-xl-9">
            <p class="fw-bold mb-1">${aM}</p>
            <p class="mb-0">${aN}</p>
          </div>
          <div class="col">
            <div class="row xxl-block flex-column g-1">
              <button 
                type="button" 
                class="btn btn-primary" 
                data-cookie-button-function="accept-all-cookies" 
                ${k?`aria-label="${_E}"`:''}
                >
                ${aO}
              </button>
              ${j?`
                <button 
                  type="button" 
                  class="btn btn-outline-primary" 
                  data-cookie-button-function="reject-all-cookies" 
                  ${l?`aria-label="${G}"`:''}
                  >
                  ${F}
                </button>
                `:''}
              <button 
                type="button" 
                class="btn btn-outline-primary" 
                data-cookie-button-function="customize-cookies" 
                ${m?`aria-label="${i}"`:''}
                >
                ${h}
              </button>
            </div>
          </div>
        </div>
      </div>
    `;n.append(o);n.appendChild(p);return n}showBanner(){this.banner!==null&&(this.banner.remove(),this.banner=null);this.banner=this.createBannerHTML();document.body.append(this.banner);var aP=this.banner.querySelector('[data-cookie-button-function="accept-all-cookies"]'),aQ=this.banner.querySelector('[data-cookie-button-function="reject-all-cookies"]'),aR=this.banner.querySelector('[data-cookie-button-function="customize-cookies"]');aP?.addEventListener('click',()=>this.handleAcceptAllButtonClick());aQ?.addEventListener('click',()=>this.handleRejectAllButtonClick());aR?.addEventListener('click',()=>this.handleCustomizeButtonClick());this.handleScrollingOfBody()}getFreezeScrollingOnBanner(){var aS=this.getConfigs(),{freezeScrollingOnBanner:aT}=aS||{};return aT}disableScrollingOfBody(){document.body.classList.add('overflow-hidden')}handleScrollingOfBody(){var aU=this.getFreezeScrollingOnBanner();aU&&this.disableScrollingOfBody()}createModalHTML(){this.modal!==null&&(this.modal.remove(),this.modal=null);var aV=this.getEnabledConsentTypes(),aW=this.getConfigs(),{modalId:aX,modalTitle:aY,centered:aZ,scrollable:_f,animation:_g,staticBackground:H,acceptAllButtonText:I,acceptAllButtonAccessibleText:J,rejectAllButtonText:K,rejectAllButtonAccessibleText:L,saveButtonText:M,saveButtonAccessibleText:N}=aW||{},O=I!==J,P=K!==L,q=M!==N,r=[];aZ&&r.push('modal-dialog-centered');_f&&r.push('modal-dialog-scrollable');this.modal=document.createElement('div');this.modal.innerHTML=`
      <div class="modal ${_g?'fade':''}" tabindex="-1" ${H?'data-bs-backdrop="static"':''} id="${aX}">
        <div class="modal-dialog ${r.join(' ')}">
          <div class="modal-content">
            <div class="modal-header bg-body-tertiary">
              <p class="modal-title fw-bolder">${aY}</p>
              ${this.showCloseButtonOnModal?'<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>':''}
            </div>
            <div class="modal-body">
              ${aV.map(bA=>{const{id:bB,title:bC,description:bD,required:bE,onByDefault:_F}=bA||{};return`
                  <div class="cookie-consent-type">
                    <div class="d-flex gap-3">
                      <div class="flex-grow-1">
                        <p class="fw-bold m-0">${bC}</p>
                      </div>
                      <div class="form-check form-switch">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          name="${bB}"
                          id="${bB}"
                          role="switch"
                          ${_F?'checked':''} 
                          ${bE?'disabled':''}
                        >
                        <label
                        class="form-check-label visually-hidden"
                        for="${bB}">ON</label>
                      </div>
                    </div>
                    <p class="m-0 small">${bD}</p>
                  </div>
                  `}).join(`<hr class="p-0 my-3">`)}
            </div> <!-- .modal-body -->

            <div class="modal-footer">
              <div class="d-grid gap-2 col-12 mx-auto d-sm-block text-sm-end">
                <button
                  type="button" 
                  class="btn btn-outline-primary me-sm-2" 
                  data-bs-dismiss="modal" 
                  data-cookie-button-function="accept-all-cookies"
                  ${O?`aria-label="${J}"`:''}
                >
                  ${I}
                </button>

                <button
                  type="button" 
                  class="btn btn-outline-primary me-sm-2" 
                  data-bs-dismiss="modal" 
                  data-cookie-button-function="reject-all-cookies"
                  ${P?`aria-label="${L}"`:''}
                >
                  ${K}
                </button>
                
                <button
                  type="button" 
                  class="btn btn-primary" 
                  data-bs-dismiss="modal" 
                  data-cookie-button-function="save-cookies"
                  ${q?`aria-label="${N}"`:''}
                >
                  ${M}
                </button>
              </div>
            </div> <!-- .modal-footer -->
          </div>
        </div>
      </div>
    `;return this.modal}showModal(){var bF=this.getConfigs(),{modalId:bG}=bF||{},bI=this.modal.querySelector('[data-cookie-button-function="reject-all-cookies"]'),bJ=this.modal.querySelector('[data-cookie-button-function="save-cookies"]');this.modal=this.createModalHTML();var bH=this.modal.querySelector('[data-cookie-button-function="accept-all-cookies"]');bH?.addEventListener('click',()=>this.handleAcceptAllButtonClick());bI?.addEventListener('click',()=>this.handleRejectAllButtonClick());bJ?.addEventListener('click',()=>this.handleSaveButtonClick());var bK=new bootstrap.Modal(this.modal.querySelector(`#${bG}`));bK.show()}bootstrapExists(){return typeof bootstrap!=='undefined'}pushToDataLayer(bL){window.dataLayer=window.dataLayer||[];window.dataLayer.push(bL)}gtag(){window.dataLayer=window.dataLayer||[];dataLayer.push(arguments)}getVersionFromLocalStorage(){return localStorage.getItem(this.getVersionName())}verifyVersionFromLocalStorage(){var bM=this.getVersion(),bN=this.getVersionFromLocalStorage();return +bN=== +bM}setVersion(){localStorage.setItem(this.getVersionName(),this.getVersion())}getCookieConsentAcceptEventName(){var bO=this.getConfigs(),{cookieConsentAcceptEventName:bP}=bO||{};!bP&&console.warn('cookieConsentAcceptEventName in getCookieConsentAcceptEventName is empty');return bP}getCookieConsentRejectEventName(){var bQ=this.getConfigs(),{cookieConsentRejectEventName:bR}=bQ||{};!bR&&console.warn('cookieConsentRejectEventName in getCookieConsentRejectEventName is empty');return bR}fireCookieConsentUpdateEvent(){var bS=this.getConfigs(),{cookieConsentUpdateEventName:bT}=bS||{};if(!bT){console.warn('cookieConsentUpdateEventName in fireCookieConsentUpdateEvent is empty. No event pushed to dataLayer');return}this.pushToDataLayer({event:bT})}fireCookieConsentIndividualEvents(){var bU=this.getConsentTypePrefix(),bV=this.getEnabledConsentTypes();for(const cA of bV){var bW=bU+cA.id,bX=this.getCookieConsentAcceptEventName(),bY=this.getCookieConsentRejectEventName(),bZ=localStorage.getItem(bW)===this.SET_POSITIVE_VALUE?bX:bY;this.pushToDataLayer({event:bZ+'_'+cA?.id})}}setConsent_default(){this.gtag('consent','default',{functionality_storage:'granted',security_storage:'granted',analytics_storage:'denied',ad_storage:'denied',ad_user_data:'denied',ad_personalization:'denied',personalization_storage:'denied'})}updateConsent_allGranted(){this.gtag('consent','update',{ad_personalization:'granted',ad_storage:'granted',ad_user_data:'granted',analytics_storage:'granted',functionality_storage:'granted',personalization_storage:'granted',security_storage:'granted'})}updateConsent_allDenied(){this.gtag('consent','update',{ad_personalization:'denied',ad_storage:'denied',ad_user_data:'denied',analytics_storage:'denied',functionality_storage:'granted',personalization_storage:'denied',security_storage:'granted'})}updateConsent_fromLocalStorage(){var cB=this.getConsentTypePrefix(),cC=this.getEnabledConsentTypes(),cD={};for(const cF of cC){var cE=cB+cF.id;switch(cF.permissionType) {case 'ad':cD.ad_personalization=cD.ad_storage=cD.ad_user_data=localStorage.getItem(cE)===this.SET_POSITIVE_VALUE?'granted':'denied';break;case 'analytics':cD.analytics_storage=localStorage.getItem(cE)===this.SET_POSITIVE_VALUE?'granted':'denied';break;case 'functionality':cD.functionality_storage=localStorage.getItem(cE)===this.SET_POSITIVE_VALUE?'granted':'denied';break;case 'personalization':cD.personalization_storage=localStorage.getItem(cE)===this.SET_POSITIVE_VALUE?'granted':'denied';break;case 'security':cD.security_storage=localStorage.getItem(cE)===this.SET_POSITIVE_VALUE?'granted':'denied';break}}this.gtag('consent','update',cD)}handleAcceptAllButtonClick(){try{this.setConsent_acceptAll();this.banner&&(this.banner.remove(),this.banner=null);this.updateConsent_allGranted();this.fireCookieConsentUpdateEvent();this.fireCookieConsentIndividualEvents()}catch(cG){console.error('There was an error with handleAcceptAllButtonClick()');console.error(cG)}}handleRejectAllButtonClick(){try{this.setConsent_rejectAll();this.banner&&(this.banner.remove(),this.banner=null);this.updateConsent_allDenied();this.fireCookieConsentUpdateEvent();this.fireCookieConsentIndividualEvents()}catch(cH){console.error('There was an error with handleRejectAllButtonClick()');console.error(cH)}}handleSaveButtonClick(){try{this.setConsent_saveCustomized();this.updateConsent_fromLocalStorage();this.fireCookieConsentUpdateEvent();this.fireCookieConsentIndividualEvents()}catch(cI){console.error('There was an error with handleSaveButtonClick()');console.error(cI)}}handleCustomizeButtonClick(){try{this.banner&&(this.banner.remove(),this.banner=null);this.showModal()}catch(cJ){console.error('There was an issue with callback function of handleCustomizeButtonClick()');console.error(cJ)}}}
